<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tapoli Retail | Inspired Goods</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Configure Tailwind for a warm, earthy theme -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'tapoli-primary': '#434674', // Deep Indigo/Slate
                        'tapoli-accent': '#f97316', // Orange-600 for contrast
                        'tapoli-bg': '#f5f5f4',     // Stone-100
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    boxShadow: {
                        'soft': '0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.03)',
                        'xl-soft': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                    }
                }
            }
        }
    </script>

    <!-- Load React and ReactDOM from Production CDNs (Minified) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <style>
      /* Custom scrollbar for aesthetic */
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: #f5f5f4; }
      ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 10px; }
      ::-webkit-scrollbar-thumb:hover { background: #a8a29e; }
      
      body {
        font-family: 'Inter', sans-serif;
        background-color: #f5f5f4;
      }
      .tapoli-card {
        transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      }
      .tapoli-card:hover {
        transform: translateY(-4px);
      }
      .tapoli-title {
        font-family: 'Playfair Display', serif;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        // Using React's global objects provided by the production CDNs
        const { useState, useEffect, useMemo } = React;
        
        // --- Inline SVG Icon Components (Lucide Icons adapted) ---
        const Icon = ({ path, className, size = 20, stroke = 'currentColor', title = '', ...props }) => (
            React.createElement('svg', { 
                xmlns: "http://www.w3.org/2000/svg", 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24", 
                fill: "none", 
                stroke: stroke, 
                strokeWidth: "2", 
                strokeLinecap: "round", 
                strokeLinejoin: "round", 
                className: className, 
                ...props 
            },
                title && React.createElement('title', null, title),
                path.map((p, i) => React.createElement('path', { key: i, d: p }))
            )
        );

        const ShoppingCart = (props) => (
            Icon({ path: ["M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z", "M3 6h18", "M16 10a4 4 0 0 1-8 0"], ...props })
        );
        const X = (props) => (
            Icon({ path: ["M18 6 6 18", "m6 6 12 12"], ...props })
        );
        const ChevronRight = (props) => (
            Icon({ path: ["m9 18 6-6-6-6"], size: 16, ...props })
        );
        const Star = (props) => (
            Icon({ path: ["M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.53L12 17.77l-5.82 3.02L7 14.14 2 9.27l6.91-1.01L12 2z"], fill: 'currentColor', ...props })
        );
        const MapPin = (props) => (
            Icon({ path: ["M12 22s-8-4.5-8-11.8C4 4.5 7.8 1 12 1c4.2 0 8 3.5 8 9.2S12 22 12 22z", "M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"], ...props })
        );
        const Truck = (props) => (
            Icon({ path: ["M10 17H5a2 2 0 0 1-2-2V9h18v6a2 2 0 0 1-2 2h-5m-7 0v2h4v-2", "M18 10h3v4h-3", "M7 17v2h4v-2"], ...props })
        );
        const CreditCard = (props) => (
            Icon({ path: ["M1 4h22v16H1z", "M1 10h22"], ...props })
        );
        const Menu = (props) => (
            Icon({ path: ["M3 12h18", "M3 6h18", "M3 18h18"], ...props })
        );
        const Home = (props) => (
            Icon({ path: ["m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z", "M9 22V12h6v10"], ...props })
        );

        // --- Mock Data ---
        const PLACEHOLDER_URL = "https://placehold.co/600x800/e7e5e4/a8a29e?text=TAPOLI+ITEM";

    
            
                if (step === 3) {
                    return React.createElement('div', { className: "max-w-2xl mx-auto px-4 py-24 text-center" },
                        React.createElement('div', { className: "inline-block p-4 bg-green-100 rounded-full mb-6 border-4 border-green-300" },
                            React.createElement(Icon, { path: ["M20 6 9 17l-5-5"], stroke: "green", size: 36 })
                        ),
                        React.createElement('h2', { className: "tapoli-title text-3xl font-extrabold text-tapoli-primary mb-2" }, "Order Placed!"),
                        React.createElement('p', { className: "text-gray-600 text-lg mb-8" }, "Your support goes directly to our artisan partners."),
                        React.createElement(Button, { onClick: () => setView('home') }, "Continue Shopping")
                    );
                }
            
                return React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12" },
                    React.createElement('h1', { className: "tapoli-title text-4xl font-extrabold text-tapoli-primary mb-10 border-b border-gray-200 pb-3" }, "Secure Payment"),
                    React.createElement('div', { className: "lg:grid lg:grid-cols-3 lg:gap-12" },
                        
                        // Checkout Form (Shipping & Payment)
                        React.createElement('div', { className: "lg:col-span-2" },
                            React.createElement('form', { onSubmit: handlePlaceOrder, className: "space-y-8" },
                                React.createElement('div', { className: "space-y-6 bg-white p-6 rounded-xl shadow-soft border border-gray-100" },
                                    React.createElement('h3', { className: "text-xl font-bold text-tapoli-primary flex items-center gap-3 border-b pb-3 mb-4" }, 
                                        React.createElement(MapPin, { className: "text-tapoli-accent" }), "Shipping Information"
                                    ),
                                    React.createElement('div', { className: "grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2" },
                                        React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Full Name"), React.createElement('input', { type: "text", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                        React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Email"), React.createElement('input', { type: "email", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                        React.createElement('div', { className: "sm:col-span-2" }, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Address Line 1"), React.createElement('input', { type: "text", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                        React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "City"), React.createElement('input', { type: "text", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                        React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Region"), React.createElement('input', { type: "text", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" }))
                                    )
                                ),

                                React.createElement('div', { className: "space-y-6 bg-white p-6 rounded-xl shadow-soft border border-gray-100" },
                                    React.createElement('h3', { className: "text-xl font-bold text-tapoli-primary flex items-center gap-3 border-b pb-3 mb-4" }, 
                                        React.createElement(CreditCard, { className: "text-tapoli-accent" }), "Payment Details"
                                    ),
                                    React.createElement('div', { className: "space-y-4" },
                                        React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Card Number"), React.createElement('input', { type: "text", placeholder: "XXXX XXXX XXXX XXXX", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                        React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                                            React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "Expiration"), React.createElement('input', { type: "text", placeholder: "MM/YY", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" })),
                                            React.createElement('div', null, React.createElement('label', { className: "block text-xs font-medium text-gray-700 mb-1" }, "CVC"), React.createElement('input', { type: "text", placeholder: "CVC", required: true, className: "w-full border border-gray-300 rounded-lg p-2.5 text-sm focus:border-tapoli-accent focus:ring-tapoli-accent/50" }))
                                        )
                                    )
                                )
                            ),
                            React.createElement(Button, { 
                                variant: "primary", 
                                type: "submit", 
                                form: "checkout-form", // Note: The form needs an id to link this button
                                disabled: loading || cart.length === 0, 
                                className: "w-full mt-8 py-4 text-xl font-bold",
                                onClick: handlePlaceOrder
                            }, loading ? 'Processing Order...' : `Pay ${formatCurrency(cartTotal)}`)
                        ),
                        
                        // Order Summary
                        React.createElement('div', { className: "lg:col-span-1 mt-10 lg:mt-0" },
                            React.createElement('div', { className: "bg-white rounded-xl border border-gray-200 p-6 shadow-soft sticky top-28" },
                                React.createElement('h2', { className: "text-xl font-bold text-tapoli-primary mb-6 border-b border-gray-100 pb-3" }, "Review Order"),
                                React.createElement('ul', { className: "space-y-4 border-b border-gray-100 pb-4 mb-4" },
                                    cart.map((product) =>
                                        React.createElement('li', { key: product.id, className: "flex justify-between items-center text-sm" },
                                            React.createElement('div', { className: "text-gray-700" }, 
                                                `${product.name} `,
                                                React.createElement('span', { className: "text-xs text-gray-500" }, `(x${product.quantity})`)
                                            ),
                                            React.createElement('p', { className: "font-semibold" }, formatCurrency(product.price * product.quantity))
                                        )
                                    )
                                ),
                                React.createElement('div', { className: "space-y-2 text-sm" },
                                    React.createElement('div', { className: "flex justify-between text-gray-600" }, React.createElement('p', null, "Subtotal"), React.createElement('p', null, formatCurrency(cartTotal))),
                                    React.createElement('div', { className: "flex justify-between text-gray-600" }, React.createElement('p', null, "Shipping"), React.createElement('p', { className: "text-green-600 font-medium" }, "Free"))
                                ),
                                React.createElement('div', { className: "flex justify-between text-2xl font-extrabold text-tapoli-primary mt-4 pt-4 border-t border-gray-200" },
                                    React.createElement('p', null, "Total"),
                                    React.createElement('p', { className: "text-tapoli-accent" }, formatCurrency(cartTotal))
                                )
                            )
                        )
                    )
                );
            };

            const AboutView = () => (
                React.createElement('div', { className: "max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16" },
                    React.createElement('h1', { className: "tapoli-title text-4xl font-extrabold text-tapoli-primary mb-8 border-b border-tapoli-accent pb-3" }, "The Tapoli Promise"),
                    
                    React.createElement('div', { className: "mb-10 text-lg leading-relaxed text-gray-700" },
                        React.createElement('p', { className: "mb-4" }, "The name 'Tapoli' evokes the traditional Ghanaian grinding stone and pestle—a symbol of craftsmanship, dedication, and the transformation of raw materials into something essential. Our mission is to be the bridge between talented Ghanaian artisans and the global marketplace."),
                        React.createElement('p', null, "We ensure fair wages, ethical sourcing, and celebrate the rich cultural heritage woven into every item we offer. When you purchase from Tapoli, you support a lineage of mastery.")
                    ),
                    
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-8 text-center pt-4" },
                        React.createElement('div', { className: "p-6 bg-white rounded-xl shadow-soft border border-gray-100" },
                            React.createElement(MapPin, { size: 32, className: "mx-auto text-tapoli-accent mb-3" }),
                            React.createElement('h3', { className: "font-semibold text-tapoli-primary text-lg" }, "Local Sourcing"),
                            React.createElement('p', { className: "text-sm text-gray-500 mt-1" }, "All materials sourced within Ghana.")
                        ),
                        React.createElement('div', { className: "p-6 bg-white rounded-xl shadow-soft border border-gray-100" },
                            React.createElement(Icon, { path: ["M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"], fill: 'currentColor', size: 32, className: "mx-auto text-tapoli-accent mb-3" }),
                            React.createElement('h3', { className: "font-semibold text-tapoli-primary text-lg" }, "Fair Trade"),
                            React.createElement('p', { className: "text-sm text-gray-500 mt-1" }, "Directly benefiting every artisan partner.")
                        ),
                        React.createElement('div', { className: "p-6 bg-white rounded-xl shadow-soft border border-gray-100" },
                            React.createElement(Star, { size: 32, className: "mx-auto text-tapoli-accent mb-3" }),
                            React.createElement('h3', { className: "font-semibold text-tapoli-primary text-lg" }, "Unique Quality"),
                            React.createElement('p', { className: "text-sm text-gray-500 mt-1" }, "No two items are exactly the same.")
                        )
                    ),
                    React.createElement(Button, { onClick: () => setView('home'), variant: "secondary", className: "mt-12 py-3.5" }, "Back to Collection")
                )
            );

            const Footer = () => (
                React.createElement('footer', { className: "bg-tapoli-primary text-white pt-16 pb-8 font-sans mt-12" },
                    React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
                        React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-12 mb-10 border-b border-tapoli-primary/50 pb-8" },
                            React.createElement('div', { className: "col-span-2 md:col-span-1" },
                                React.createElement('div', { className: "flex items-center gap-2 mb-4" },
                                    React.createElement(Icon, { path: ["M13.8 2.1c.4.7-.6 3.1-2.1 3.2-1.5.1-4.7 2.1-5.7 4.2C5 12.5 4 14.7 4 16.5c0 3.3 3.1 5.5 7.9 5.5 4.7 0 7.9-2.2 7.9-5.5 0-1.7-1-3.9-2-5.2-1.1-2.1-4.3-4.1-5.7-4.2-1.5-.1-2.5-2.5-2.1-3.2Z"], size: 28, className: "text-tapoli-accent", fill: 'currentColor' }),
                                    React.createElement('span', { className: "tapoli-title font-bold text-3xl" }, "Tapoli")
                                ),
                                React.createElement('p', { className: "text-gray-300 text-sm leading-relaxed" }, "Bringing the soul of Ghanaian craftsmanship to your home.")
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: "font-semibold text-white mb-4 uppercase tracking-wider text-sm" }, "Quick Links"),
                                React.createElement('ul', { className: "space-y-2 text-gray-300 text-sm" },
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer", onClick: () => setView('home') }, "Shop All"),
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer", onClick: () => setView('about') }, "Our Story"),
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer" }, "Artisans")
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: "font-semibold text-white mb-4 uppercase tracking-wider text-sm" }, "Customer Care"),
                                React.createElement('ul', { className: "space-y-2 text-gray-300 text-sm" },
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer" }, "Shipping"),
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer" }, "Returns Policy"),
                                    React.createElement('li', { className: "hover:text-tapoli-accent cursor-pointer" }, "Contact Us")
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('h3', { className: "font-semibold text-white mb-4 uppercase tracking-wider text-sm" }, "Follow Us"),
                                React.createElement('p', { className: "text-gray-300 text-sm" }, "Stay connected with our latest collections and news.")
                            )
                        ),
                        React.createElement('div', { className: "pt-4 flex flex-col md:flex-row justify-between items-center text-gray-500 text-xs" },
                            React.createElement('p', null, "© 2024 Tapoli Retail. All rights reserved."),
                            React.createElement('p', { className: "mt-3 md:mt-0" }, "Handmade with intention.")
                        )
                    )
                )
            );

            // Conditional rendering of the main view
            let content;
            if (view === 'product' && activeProduct) {
                content = React.createElement(ProductDetailView, null);
            } else if (view === 'checkout') {
                content = React.createElement(CheckoutView, null);
            } else if (view === 'about') {
                content = React.createElement(AboutView, null);
            } else {
                content = React.createElement(React.Fragment, null, React.createElement(HeroSection, null), React.createElement(ProductListView, null));
            }

            return React.createElement('div', { className: "min-h-screen flex flex-col font-sans bg-tapoli-bg" },
                React.createElement(Navbar, null),
                React.createElement('main', { className: "flex-grow" }, content),
                React.createElement(Footer, null),
                React.createElement(CartDrawer, null),
                React.createElement(Toast, { show: toast.show, message: toast.message, onClose: () => setToast({...toast, show: false}) })
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));

    </script>
</body>
</html>
